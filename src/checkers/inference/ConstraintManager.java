package checkers.inference;

import org.checkerframework.common.basetype.BaseAnnotatedTypeFactory;

import java.util.Collection;
import java.util.HashSet;
import java.util.Set;

import checkers.inference.model.Constraint;

/**
 * Constraint manager holds constraints that are generated by InferenceVisitor.
 *
 * @author mcarthur
 *
 */
public class ConstraintManager {

    private boolean ignoreConstraints = false;

    private final Set<Constraint> constraints = new HashSet<Constraint>();

    private final BaseAnnotatedTypeFactory realTypeFactory;

    public ConstraintManager(BaseAnnotatedTypeFactory realTypeFactory) {
        this.realTypeFactory = realTypeFactory;
    }

    public Set<Constraint> getConstraints() {
        return constraints;
    }

    public void add(Constraint constraint) {
        if (!ignoreConstraints) {
            constraints.add(constraint);
        }
    }

    public void addAll(Collection<? extends Constraint> constraints) {
        if (!ignoreConstraints) {
            for (Constraint constraint : constraints) {
                add(constraint);
            }
        }
    }

    public void startIgnoringConstraints() {
        this.ignoreConstraints = true;
    }

    public void stopIgnoringConstraints() {
        this.ignoreConstraints = false;
    }

}
